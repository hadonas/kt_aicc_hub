# ADR-002: RAG 시스템 통합 아키텍처 채택

## Context

ADR-001에서 결정한 RAG 모델 분할 방향을 실제 구현 과정에서 재검토하게 되었다. 시간적 제약과 응답 효율성을 고려했을 때, 여러 단계로 분할하는 것이 실현 가능하지 않다는 판단이 들었다.

## Alternatives

| 방법 | 설명 | 장점 | 단점 |
|------|------|------|------|
| **RAG 모델 분해** | qna, embedding, retriever, generator를 별도 서비스로 분리 | MSA 설계에 충실, 서비스별 독립성 | 구현 복잡성, 개발 시간 연장, 응답 지연 |
| **RAG 모델 통합** | rag-qna-service가 임베딩, RAG, 답변 생성을 모두 담당 | 구현 단순성, 응답 효율성, 개발 속도 | MSA 원칙 일부 위배 |

## Decision

**RAG 모델을 하나로 통합하기로 결정했다.**

**선택 이유:**
- 시간적 제약과 응답 효율성 우선 고려
- 핵심 RAG 로직의 응집성 확보
- 개발 속도와 안정성 향상

**대안적 MSA 접근:**
- RAG 모델은 통합하되, 데이터베이스 서비스와 STT/TTS 서비스는 별도로 분리
- 전체적으로는 여전히 마이크로서비스 아키텍처 유지

## Consequences

### 긍정적 영향
- ✅ 구현 복잡성 감소
- ✅ 개발 시간 단축
- ✅ 응답 효율성 향상
- ✅ 핵심 RAG 로직의 응집성 확보

### 부정적 영향
- ⚠️ MSA 원칙의 일부 위배 (RAG 모델 내부)
- ⚠️ 단일 서비스의 책임 증가

### 후속 조치
- API 계약 작업을 통합된 모델 기반으로 진행
- FP(기능 명세서) 및 기획서 수정 요청
- 데이터베이스 서비스와 STT/TTS 서비스는 별도 MSA 구성요소로 유지
